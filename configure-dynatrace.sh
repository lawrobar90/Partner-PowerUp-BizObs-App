#!/bin/bash

echo "üîß Dynatrace Service Flow Configuration Helper"
echo "=============================================="

echo ""
echo "üìã MANUAL CONFIGURATION STEPS:"
echo ""

echo "1Ô∏è‚É£ Process Group Detection Rule"
echo "   Navigate to: Settings ‚Üí Processes and containers ‚Üí Process group detection"
echo "   ‚Ä¢ Click 'Add detection rule'"
echo "   ‚Ä¢ Rule name: 'BizObs Customer Journey Services'"
echo "   ‚Ä¢ Process group naming format: Use environment variable"
echo "   ‚Ä¢ Environment variable: DT_PROCESS_GROUP_NAME"
echo "   ‚Ä¢ Conditions:"
echo "     - Environment variable exists: DT_APPLICATION_NAME" 
echo "     - Environment variable value: BizObs-CustomerJourney"
echo "   ‚Ä¢ Save and enable"

echo ""
echo "2Ô∏è‚É£ Service Detection Rule"
echo "   Navigate to: Settings ‚Üí Server-side service monitoring ‚Üí Service detection rules"
echo "   ‚Ä¢ Click 'Add detection rule'"
echo "   ‚Ä¢ Rule name: 'BizObs Service Detection'"
echo "   ‚Ä¢ Service naming: Use environment variable"
echo "   ‚Ä¢ Environment variable: DT_SERVICE_NAME"
echo "   ‚Ä¢ Conditions:"
echo "     - Process group name contains: Service"
echo "     - Environment variable exists: DT_APPLICATION_NAME"
echo "   ‚Ä¢ Save and enable"

echo ""
echo "3Ô∏è‚É£ Verify Configuration"
echo "   ‚Ä¢ Wait 2-3 minutes for rules to take effect"
echo "   ‚Ä¢ Run: ./test-horizontal-flow.sh"
echo "   ‚Ä¢ Check Services ‚Üí Service flow in Dynatrace"

echo ""
echo "‚úÖ Expected Result:"
echo "   ProductDiscoveryService ‚Üí ProductSelectionService ‚Üí CartAdditionService"
echo "   ‚Üí CheckoutProcessService ‚Üí OrderConfirmationService ‚Üí PostPurchaseService"

echo ""
echo "üèÉ Ready to test? Run: ./test-horizontal-flow.sh"